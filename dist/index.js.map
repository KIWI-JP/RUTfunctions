{"version":3,"file":null,"sources":["../src/index.js"],"sourcesContent":["/* create by claudio.dcv@gmail.com */\n\n/* 2017 */\n\n\n/*\n* @param paramrut {string}= 16.761.256-9\n* @return {string} = 167512569\n*/\nconst rutClean = paramrut => `${paramrut}`\n  .toString().replace(/[^0-9kK]+/g, '').toUpperCase();\n\n\n/*\n* @param paramrut {number/string} = 16751256 / 16.751.256\n* @return {string} = 9\n*/\nconst rutCalcDv = (paramrut) => {\n  const rut = rutClean(`${paramrut}`.toString());\n  const reverseRut = `${rut}`.split('').reverse().join('');\n  let result = 0;\n  let n = 1;\n\n  Object.keys(reverseRut).forEach((i) => {\n    n += 1;\n    result += parseInt(reverseRut[i], 10) * n;\n    n = n === 7 ? 1 : n;\n  });\n\n  result = 11 - (result % 11);\n  result = result === 11 ? 0 : result;\n  return result === 10 ? 'K' : `${result}`;\n};\n\n\n/*\n* @example =\nRUTvalidate('167512569') -> true\nRUTvalidate('167512568') -> false\nRUTvalidate('16.751.256-8') -> false\nRUTvalidate('16.751.256-9') -> true\n* @param paramrut {string} = 16.761.256-9\n* @return {boolean} = true\n*/\nconst rutValidate = (paramrut) => {\n  let rut = paramrut.toString();\n  if (!/^0*(\\d{1,3}(\\.?\\d{3})*)-?([\\dkK])$/.test(rut)) {\n    return false;\n  }\n  rut = rutClean(rut);\n\n  const dv = rut.slice(-1);\n  const rutNumber = parseInt(rut.slice(0, -1), 10);\n  return rutCalcDv(rutNumber) === dv;\n};\n\n\n/*\n* @param paramrut {number/string} = 167512569\n* @return {string} = 16.761.256-9\n*/\nconst rutFormat = (paramrut) => {\n  const rut = rutClean(paramrut);\n\n  let result = `${rut.slice(-4, -1)}-${rut.substr(rut.length - 1)}`;\n\n  for (let i = 4; i < rut.length; i += 3) {\n    result = `${rut.slice(-3 - i, -i)}.${result}`;\n  }\n\n  return result;\n};\n\n\n/*\n* @param paramrut {string} = 16.751.256-9 / 16751256-9\n* @return {string} = 16751256\n*/\nconst rutGetNumber = paramrut => rutClean(`${paramrut}`.split('-')[0]);\n\n\n/*\n* @param paramrut {string} = 16.751.256-9 / 16751256-9\n* @return {string} = 9\n*/\nconst rutGetDv = paramrut => rutClean(`${paramrut}`.split('-')[1]);\n\n\n/*\n* @param paramrut {string} = 16751256\n* @return {string} = 167512569\n*/\nconst rutAddDv = paramrut => `${paramrut}${rutCalcDv(paramrut)}`;\n\n/*\ntest\nlet test1 = rutClean('16.752.156-9');\nlet test2 = rutCalcDv('16751256');\nlet test3 = rutValidate('16.751.256-9');\nlet test4 = rutValidate('16.751.256-8');\nlet test5 = rutFormat('167512569');\nlet test6 = rutGetNumber('16751256');\nlet test7 = rutGetDv('16.751.256-9');\nlet test8 = rutAddDv('16751256');\nconsole.log(test1, test2, test3, test4, test5, test6, test7, test8);\nresult:\n167521569 9 true false 16.751.256-9 16751256 9 16.751.2569 167512569\n*/\n\n/* Deprecated */\n\nconst RUTnumber = (paramrut) => {\n  console.warn('this function is deprecated, ussing `rutGetNumber`');\n  return rutGetNumber(paramrut);\n};\nconst RUTvalidate = (paramrut) => {\n  console.warn('this function is deprecated, ussing `rutValidate`');\n  return rutValidate(paramrut);\n};\nconst RUTclean = (paramrut) => {\n  console.warn('this function is deprecated, ussing `rutClean`');\n  return rutClean(paramrut);\n};\nconst RUTformat = (paramrut) => {\n  console.warn('this function is deprecated, ussing `rutFormat`');\n  return rutFormat(paramrut);\n};\nconst RUTDv = (paramrut) => {\n  console.warn('this function is deprecated, ussing `rutCalcDv`');\n  return rutCalcDv(paramrut);\n};\nconst RUTgetDv = (paramrut) => {\n  console.warn('this function is deprecated, ussing `rutGetDv`');\n  return rutGetDv(paramrut);\n};\nconst RUTNumAppendDv = (paramrut) => {\n  console.warn('this function is deprecated, ussing `rutAddDv`');\n  return rutAddDv(paramrut);\n};\n\nconst testDeprecated = (paramrut) => {\n  RUTnumber(paramrut);\n  RUTvalidate(paramrut);\n  RUTclean(paramrut);\n  RUTDv(paramrut);\n  RUTgetDv(paramrut);\n  return RUTformat(RUTNumAppendDv(paramrut));\n};\n\nexport {\n  rutClean,\n  rutCalcDv,\n  rutValidate,\n  rutFormat,\n  rutGetNumber,\n  rutGetDv,\n  rutAddDv,\n\n  RUTnumber,\n  RUTvalidate,\n  RUTclean,\n  RUTformat,\n  RUTDv,\n  RUTgetDv,\n  RUTNumAppendDv,\n\n  testDeprecated,\n};\n"],"names":["rutClean","paramrut","toString","replace","toUpperCase","rutCalcDv","rut","reverseRut","split","reverse","join","result","n","forEach","i","parseInt","rutValidate","test","dv","slice","rutNumber","rutFormat","substr","length","rutGetNumber","rutGetDv","rutAddDv","RUTnumber","warn","RUTvalidate","RUTclean","RUTformat","RUTDv","RUTgetDv","RUTNumAppendDv","testDeprecated"],"mappings":"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"}